<!DOCTYPE html>
<html lang="az">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wishlist - E-commerce</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" />
</head>
<body class="bg-gray-50 min-h-screen flex flex-col">
    <div id="navbar-placeholder"></div>

    <div class="container mx-auto px-4 py-12 flex-grow">
        <h2 class="text-3xl font-bold mb-8 text-red-600"><i class="fas fa-heart mr-2"></i> My Wishlist</h2>
        
        <div id="wishlist-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
        </div>
        
        <div id="empty-wishlist" class="hidden text-center py-12">
            <p class="text-gray-500 text-xl">Your wishlist is empty.</p>
            <a href="shop.html" class="mt-4 inline-block text-indigo-600 hover:underline">Go Shopping</a>
        </div>
    </div>

    <div id="footer-placeholder"></div>
    <script src="navbar.js"></script>
    <script src="footer.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const container = document.getElementById('wishlist-container');
            const emptyMsg = document.getElementById('empty-wishlist');
            
            function loadWishlist() {
                const wishlist = JSON.parse(localStorage.getItem('wishlist')) || [];
                container.innerHTML = '';

                if (wishlist.length === 0) {
                    emptyMsg.classList.remove('hidden');
                    return;
                } else {
                    emptyMsg.classList.add('hidden');
                }

                wishlist.forEach((item, index) => {
                    const card = document.createElement('div');
                    card.className = "bg-white rounded-xl shadow-md overflow-hidden border border-gray-100 hover:shadow-lg transition";
                    card.innerHTML = `
                        <div class="relative">
                            <img src="${item.imageUrl}" class="w-full h-48 object-cover">
                            <button onclick="removeFromWishlist(${index})" class="absolute top-2 right-2 bg-white p-2 rounded-full shadow-md text-red-500 hover:bg-gray-100 transition">
                                <i class="fas fa-trash-alt"></i>
                            </button>
                        </div>
                        <div class="p-4">
                            <h5 class="font-bold text-gray-800 mb-1">${item.brand} ${item.model}</h5>
                            <p class="text-indigo-600 font-bold text-lg mb-3">${item.price} â‚¼</p>
                            <button onclick='moveToCart(${JSON.stringify(item)}, ${index})' class="w-full bg-indigo-600 text-white py-2 rounded hover:bg-indigo-700 transition">
                                Move to Cart
                            </button>
                        </div>
                    `;
                    container.appendChild(card);
                });
            }

            window.removeFromWishlist = function(index) {
                let wishlist = JSON.parse(localStorage.getItem('wishlist')) || [];
                wishlist.splice(index, 1);
                localStorage.setItem('wishlist', JSON.stringify(wishlist));
                loadWishlist();
            }

            window.moveToCart = function(item, index) {
                let cart = JSON.parse(localStorage.getItem('cart')) || [];
                let existing = cart.find(p => p.id === item.id);
                if (existing) {
                    existing.quantity += 1;
                } else {
                    item.quantity = 1;
                    cart.push(item);
                }
                localStorage.setItem('cart', JSON.stringify(cart));
                removeFromWishlist(index);
                alert("Moved to cart!");
            }

            loadWishlist();
        });
    </script>
</body>
</html>